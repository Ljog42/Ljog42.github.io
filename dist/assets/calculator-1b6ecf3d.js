var N=Object.defineProperty;var F=(s,t,i)=>t in s?N(s,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):s[t]=i;var C=(s,t,i)=>(F(s,typeof t!="symbol"?t+"":t,i),i),D=(s,t,i)=>{if(!t.has(s))throw TypeError("Cannot "+i)};var e=(s,t,i)=>(D(s,t,"read from private field"),i?i.call(s):t.get(s)),a=(s,t,i)=>{if(t.has(s))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(s):t.set(s,i)},o=(s,t,i,n)=>(D(s,t,"write to private field"),n?n.call(s,i):t.set(s,i),i);var O=(s,t,i,n)=>({set _(w){o(s,t,w,i)},get _(){return e(s,t,n)}}),f=(s,t,i)=>(D(s,t,"access private method"),i);import"./modulepreload-polyfill-3cfb730f.js";var r,h;class L{constructor(t,i,n){a(this,r,void 0);a(this,h,void 0);o(this,r,t),o(this,h,i),this.buttons=n}errorReset(){setTimeout(function(){e(this,r).reset(),e(this,h).clear()},1500)}clearInputs(){e(this,h).clear(),e(this,r).reset()}processResult(){e(this,r).compute();let t=e(this,r).getResult();e(this,h).displayValue(t)}actualize(){e(this,r).setLast(e(this,h).getLastDisplayed())}addDigit(t){e(this,h).concatToDisplay(t),e(this,r).setNumber(t),e(this,r).setLast(t)}addOp(t){e(this,h).concatToDisplay(" "+t+" "),e(this,r).setOperator(t),e(this,r).incCounter(),e(this,r).setLast(t)}addFloat(){e(this,r).addFloat(),e(this,h).concatFloat(),e(this,r).setLast("float")}erase(){e(this,r).checkInit()&&(e(this,r).checkNotOp()?(e(this,h).erase(-1),e(this,r).backToPrevNumber(),this.actualize()):(e(this,h).erase(-3),e(this,r).backToPrevOp(),this.actualize(),e(this,r).checkForNumber()&&(e(this,r).decCounter(),e(this,r).backToPrevNumber())))}processInput(t,i){if(t=="digit"&&this.addDigit(i),t=="operator"&&this.addOp(i),t=="float"&&this.addFloat(),t=="backspace"&&this.erase(),t=="clear"&&this.clearInputs(),t=="equal")try{this.processResult()}catch(n){console.error(n),e(this,h).displayValue("Error: division by 0"),this.errorReset()}}}r=new WeakMap,h=new WeakMap;function I(s){return document.getElementById(s)}class M{constructor(t){this.digitsButtons=t.digits.map(i=>new R(i)),this.opsButtons=t.operators.map(i=>new x(i)),this.backspaceButton=new P(t.backspace),this.equalButton=new q(t.equal),this.floatButton=new H(t.float),this.clearButton=new A(t.clear)}}class m{constructor(t){this.element=I(t),this.value=t}}class R extends m{constructor(t){super(t),this.type="digit"}}class x extends m{constructor(t){super(t),this.type="operator"}}class H extends m{constructor(t){super(t),this.type="float"}}class P extends m{constructor(t){super(t),this.type="backspace"}}class q extends m{constructor(t){super(t),this.type="equal"}}class A extends m{constructor(t){super(t),this.type="clear"}}var l,d,c,u,b,g,B,y,E;class V{constructor(){a(this,g);a(this,y);a(this,l,void 0);a(this,d,void 0);a(this,c,void 0);a(this,u,void 0);a(this,b,void 0);o(this,l,[]),o(this,d,[]),o(this,c,0),o(this,u,0),o(this,b,void 0)}add(t,i){let n=t+i;return n!=0?n:0}subtract(t,i){let n=t-i;return n!=0?n:0}multiply(t,i){let n=t*i;return n!=0?n:0}divide(t,i){let n=t/i;return n!=0?n:0}get lastEntered(){return e(this,b)}get opCounter(){return e(this,u)}get counter(){return e(this,c)}get operators(){return e(this,d)}get numbers(){return e(this,l)}set lastEntered(t){o(this,b,t)}set opCounter(t){o(this,u,t)}set counter(t){o(this,c,t)}set operators(t){o(this,d,t)}set numbers(t){o(this,l,t)}reset(){this.counter=0,this.numbers.splice(0,this.numbers.length),this.operators=[],this.lastEntered=void 0}getResult(){return this.numbers[0]*1e5/1e5}setNumber(t){this.numbers[this.counter]!=null?f(this,g,B).call(this,t):f(this,y,E).call(this,t)}setOperator(t){console.log(t),this.operators.push(t)}addFloat(){this.numbers[this.counter]!=null?f(this,g,B).call(this,"."):f(this,y,E).call(this,"0.")}setLast(t){this.lastEntered=t,console.log(this.lastEntered)}checkInit(){return this.lastEntered!=null}checkNotOp(){return this.lastEntered!=" "}delNumbers(){this.numbers[this.counter]=this.numbers[this.counter].slice(0,-1)}checkForNumber(){return this.counter>0}incCounter(){O(this,c)._++}decCounter(){O(this,c)._--}backToPrevNumber(){this.numbers.pop()}backToPrevOp(){this.operators.pop()}setPriority(){this.numbers.length>=this.operators.length&&(this.operators.includes("*")?this.opCounter=this.operators.indexOf("*"):this.operators.includes("/")?this.opCounter=this.operators.indexOf("/"):this.opCounter=0)}sumOperation(){let t=this.add(this.numbers[this.opCounter],this.numbers[this.opCounter+1]);this.numbers.splice(this.opCounter,2,t),this.operators.splice(this.opCounter,1)}subOperation(){let t=this.subtract(this.numbers[this.opCounter],this.numbers[this.opCounter+1]);this.operators.splice(this.opCounter,1),this.numbers.splice(this.opCounter,2,t)}divOperation(){if(this.numbers[1]!=0){let t=this.divide(this.numbers[this.opCounter],this.numbers[this.opCounter+1]);this.numbers.splice(this.opCounter,2,t),this.operators.splice(this.opCounter,1)}else throw new Error("ERR - Forbidden Operation: Cannot divide by 0")}multOperation(){let t=this.multiply(this.numbers[this.opCounter],this.numbers[this.opCounter+1]);this.numbers.splice(this.opCounter,2,t),this.operators.splice(this.opCounter,1)}toActualNumbers(){o(this,l,e(this,l).map(t=>Math.round(parseFloat(t)*1e5)/1e5))}compute(){for(this.toActualNumbers(),console.log(e(this,l)),console.log(e(this,c)),console.log(e(this,u));this.operators.length>0;)this.setPriority(),this.operators[e(this,u)]=="+"?this.sumOperation():this.operators[e(this,u)]=="-"?this.subOperation():this.operators[e(this,u)]=="/"?(console.log(this.operators[e(this,u)]),this.divOperation()):this.operators[e(this,u)]=="*"&&this.multOperation()}}l=new WeakMap,d=new WeakMap,c=new WeakMap,u=new WeakMap,b=new WeakMap,g=new WeakSet,B=function(t){e(this,l)[this.counter]+=t},y=new WeakSet,E=function(t){e(this,l)[this.counter]=t};class z{constructor(){this.id="screen",this.el=document.getElementById(this.id)}concatToDisplay(t){this.el.innerHTML=this.el.innerHTML+t}concatFloat(){this.el.innerHTML.length<=0?this.displayValue("0."):this.concatToDisplay(".")}clear(){this.el.innerHTML=""}displayValue(t){this.el.innerHTML=t}getLastDisplayed(){return this.el.innerHTML.charAt(this.el.innerHTML.length-1)}erase(t){this.displayValue(this.el.innerHTML.slice(0,t))}}class S{constructor(){C(this,"engine");C(this,"calcDisplay");C(this,"buttons")}getEngine(){return this.engine==null&&(this.engine=new V,this.engine.constructor=()=>this.engine),this.engine}getCalcDisplay(){return this.calcDisplay==null&&(this.calcDisplay=new z,this.calcDisplay.constructor=()=>this.calcDisplay),this.calcDisplay}getButtons(t){return this.buttons==null&&(this.buttons=new M(t),this.buttons.constructor=()=>this.buttons),this.buttons}}function k(s){return console.log(s)}const $={digits:["0","1","2","3","4","5","6","7","8","9","+","-","/","*"],operators:["+","-","/","*"],backspace:"backspace",float:"float",equal:"=",clear:"CLR"},v=new S,p=v.getButtons($),j=v.getEngine(),G=v.getCalcDisplay(),T=new L(j,G,p);k(T);k(p);function J(){for(let s in p)if(Array.isArray(p[s]))p[s].forEach(t=>{t.element.onclick=()=>{T.processInput(t.type,t.value)}});else if(s!="constructor"){let t=p[s];k(t),t.element.onclick=()=>{T.processInput(t.type,t.value)}}}J();k(p);
